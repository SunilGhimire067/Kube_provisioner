# =============================================================================
# K8s Provisioner - Environment Configuration
# =============================================================================
# NOTE: When running with Docker Compose, service hostnames (postgres, redis)
# are used automatically via docker-compose.yml environment section.
# This file is for standalone/local development without Docker.
# =============================================================================

# Database Configuration
# Docker: postgresql+asyncpg://k8s_provisioner:SecurePassword123!@postgres:5432/k8s_provisioner
# Local:  postgresql+asyncpg://k8s_provisioner:SecurePassword123!@localhost:5432/k8s_provisioner
DATABASE_URL=postgresql+asyncpg://k8s_provisioner:SecurePassword123!@localhost:5432/k8s_provisioner

# Redis Configuration
# Docker: redis://redis:6379/0
# Local:  redis://localhost:6379/0
REDIS_URL=redis://localhost:6379/0

# Security - JWT
SECRET_KEY=supersecretkey-change-in-production-use-openssl-rand-hex-32
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# Encryption - Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=your-fernet-key-generate-with-python-cryptography-fernet

# CORS
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# Environment
ENVIRONMENT=development

# Ansible Configuration
ANSIBLE_PLAYBOOKS_PATH=../ansible/playbooks
ANSIBLE_ROLES_PATH=../ansible/roles
ANSIBLE_HOST_KEY_CHECKING=False

# SSH Configuration
SSH_KEYS_DIR=./ssh_keys
SSH_CONNECTION_TIMEOUT=30

# Celery Configuration
# Docker: redis://redis:6379/0
# Local:  redis://localhost:6379/0
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0
CELERY_TASK_TRACK_STARTED=True
CELERY_TASK_TIME_LIMIT=3600

# Logging
LOG_LEVEL=INFO
LOG_FORMAT=json

# Frontend (Vite - must use VITE_ prefix)
# Change localhost to your server IP/hostname when deploying remotely
VITE_API_URL=http://localhost:8000
VITE_WS_URL=ws://localhost:8000

# Admin User (Created on first run)
ADMIN_EMAIL=admin@k8s-provisioner.local
ADMIN_PASSWORD=AdminPassword123!
ADMIN_FULL_NAME=Administrator

# Rate Limiting
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_PER_HOUR=1000

# File Upload
MAX_UPLOAD_SIZE_MB=10

# Job Configuration
MAX_CONCURRENT_JOBS=5
JOB_TIMEOUT_MINUTES=120
JOB_RETRY_ATTEMPTS=3

# Kubernetes Defaults
DEFAULT_K8S_VERSION=1.28.3
SUPPORTED_K8S_VERSIONS=1.26.0,1.27.0,1.28.0,1.28.1,1.28.2,1.28.3

# CNI Defaults
DEFAULT_CNI=calico
SUPPORTED_CNI_PLUGINS=calico,cilium,flannel

# Ingress Defaults
DEFAULT_INGRESS=nginx
SUPPORTED_INGRESS_CONTROLLERS=nginx,haproxy,traefik

# Container Runtime
DEFAULT_CONTAINER_RUNTIME=containerd
SUPPORTED_CONTAINER_RUNTIMES=containerd

# Hardening
ENABLE_CIS_K8S_BENCHMARK=true
ENABLE_CIS_LINUX_BENCHMARK=true

# Monitoring (Optional)
PROMETHEUS_ENABLED=false
GRAFANA_ENABLED=false

# Alerting (Optional)
SMTP_HOST=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
ALERT_EMAIL_FROM=
ALERT_EMAIL_TO=
